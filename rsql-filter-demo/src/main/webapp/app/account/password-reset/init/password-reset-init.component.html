<div class="bg-surface-0 dark:bg-surface-900 p-6 shadow rounded-border w-full">
  <div class="text-center mb-8">
    <div class="text-surface-900 dark:text-surface-0 text-3xl font-medium mb-4" appTranslate="reset.request.title">Reset your password</div>

    @if (!success()) {
      <div class="text-surface-600 dark:text-surface-200 font-medium leading-normal">
        <span appTranslate="reset.request.messages.info">Enter the email address you used to register</span>
      </div>
    }

    @if (success()) {
      <div class="text-surface-600 dark:text-surface-200 font-medium leading-normal">
        <span class="text-surface-600 dark:text-surface-200 font-medium leading-normal" appTranslate="reset.request.messages.success"
          >Check your email for details on how to reset your password.</span
        >
      </div>
    }
  </div>

  <div class="mb-4" style="width: 400px">
    @if (!success()) {
      <form name="form" role="form" (ngSubmit)="requestReset()" [formGroup]="resetRequestForm">
        <div class="mb-4">
          <label class="block text-surface-900 dark:text-surface-0 font-medium mb-2" for="email" appTranslate="global.form.email.label"
            >Email</label
          >
          <input
            #email
            pInputText
            type="email"
            class="w-full"
            id="email"
            name="email"
            placeholder="{{ 'global.form.email.placeholder' | translate }}"
            formControlName="email"
            data-cy="emailResetPassword"
            autocomplete="off"
          />

          @if (resetRequestForm.get('email')!.invalid && (resetRequestForm.get('email')!.dirty || resetRequestForm.get('email')!.touched)) {
            <div>
              @if (resetRequestForm.get('email')?.errors?.required) {
                <small
                  class="text-surface-600 dark:text-surface-200 font-medium leading-loose"
                  appTranslate="global.messages.validate.email.required"
                >
                  Your email is required.
                </small>
              }

              @if (resetRequestForm.get('email')?.errors?.email) {
                <small
                  class="text-surface-600 dark:text-surface-200 font-medium leading-loose"
                  appTranslate="global.messages.validate.email.invalid"
                >
                  Your email is invalid.
                </small>
              }

              @if (resetRequestForm.get('email')?.errors?.minlength) {
                <small
                  class="text-surface-600 dark:text-surface-200 font-medium leading-loose"
                  appTranslate="global.messages.validate.email.minlength"
                >
                  Your email is required to be at least 5 characters.
                </small>
              }

              @if (resetRequestForm.get('email')?.errors?.maxlength) {
                <small
                  class="text-surface-600 dark:text-surface-200 font-medium leading-loose"
                  appTranslate="global.messages.validate.email.maxlength"
                >
                  Your email cannot be longer than 50 characters.
                </small>
              }
            </div>
          }
        </div>

        <p-button
          type="submit"
          icon="pi pi-user"
          styleClass="w-full"
          data-cy="submit"
          label="{{ 'reset.request.form.button' | translate }}"
        ></p-button>
      </form>
    }
  </div>
</div>
